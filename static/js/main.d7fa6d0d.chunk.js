(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{127:function(t,e,n){t.exports=n(180)},132:function(t,e,n){},133:function(t,e,n){},180:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(11),i=n.n(c);n(132),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(133);var o,l,u=n(43),s=n(220),d=n(66),O=n.n(d),f=O()({input:{width:"70%"},editableSpan:{display:"inline-flex",justifyContent:"center",alignItems:"center",maxWidth:"70%",overflowWrap:"anywhere"}}),T=r.a.memo((function(t){var e=t.changeTitle,n=t.taskTitle,c=f(),i=Object(a.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],O=Object(a.useState)(n),T=Object(u.a)(O,2),m=T[0],E=T[1],b=Object(a.useCallback)((function(){d(!1),m.trim()&&e(m.trim())}),[m,e]),S=Object(a.useCallback)((function(t){return E(t.currentTarget.value)}),[]);return l?r.a.createElement(s.a,{className:c.input,value:m,onBlur:b,onChange:S,autoFocus:!0}):r.a.createElement("span",{onDoubleClick:function(){return d(!0)},className:c.editableSpan},n)})),m=n(225),E=n(222),b=n(209),S=n(210),p=n(74),j=n(33),A=n(9),L=n(111),_=n.n(L);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Later=3]="Later"}(l||(l={}));var v,k=_.a.create(Object(A.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"98ca0a48-2755-4c64-8a17-87fb70df4a7a"}})),D=function(){return k.get("todo-lists")},I=function(t){return k.post("todo-lists",{title:t})},h=function(t){return k.delete("todo-lists/".concat(t))},C=function(t,e){return k.put("todo-lists/".concat(t),{title:e})},g=function(t){return k.get("todo-lists/".concat(t,"/tasks"))},y=function(t,e){return k.post("todo-lists/".concat(t,"/tasks"),{title:e})},P=function(t,e){return k.delete("todo-lists/".concat(e,"/tasks/").concat(t))},w=function(t,e,n){return k.put("todo-lists/".concat(e,"/tasks/").concat(t),n)};!function(t){t.APP_SET_STATUS="APP/SET-STATUS",t.APP_SET_ERROR="APP/SET-ERROR",t.APP_SET_TASK_LOAD_STATUS="APP/APP-SET-TASK-LOAD-STATUS"}(v||(v={}));var R,K={status:"idle",tasksLoadStatus:"loading",error:null},N=function(t){return{type:v.APP_SET_ERROR,error:t}},M=function(t){return{type:v.APP_SET_STATUS,status:t}},x=function(t){return{type:v.APP_SET_TASK_LOAD_STATUS,status:t}};!function(t){t.SET_TODO_LISTS="SET-TODO-LISTS",t.REMOVE_TODOLIST="REMOVE-TODOLIST",t.ADD_TODOLIST="ADD-TODOLIST",t.CHANGE_TODOLIST_TITLE="CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="CHANGE-TODOLIST-FILTER"}(R||(R={}));var U,G=[],H=function(t,e){return{type:R.CHANGE_TODOLIST_FILTER,id:e,filter:t}},V=function(){return function(t){t(M("loading")),D().then((function(e){var n;t((n=e.data,{type:R.SET_TODO_LISTS,todoLists:n})),t(M("idle"))}))}},W=function(t){return function(e){h(t).then((function(){return e((n=t,{type:R.REMOVE_TODOLIST,id:n}));var n}))}},F=function(t){return function(e){I(t).then((function(t){return e((n=t.data.data.item,{type:R.ADD_TODOLIST,todoList:n}));var n}))}},B=function(t,e){return function(n){C(t,e).then((function(){return n(function(t,e){return{type:R.CHANGE_TODOLIST_TITLE,title:e,id:t}}(t,e))}))}};!function(t){t.REMOVE_TASK="REMOVE-TASK",t.ADD_TASK="ADD-TASK",t.UPDATE_TASK="CHANGE-TASK-STATUS",t.SET_TASKS="SET-TASKS"}(U||(U={}));var z={},J=function(t){return function(e){e(x("loading")),g(t).then((function(n){var a,r;e((a=t,r=n.data.items,{type:U.SET_TASKS,todoListID:a,tasks:r})),e(x("idle"))}))}},Y=function(t,e){return function(n){P(t,e).then((function(){n(function(t,e){return{type:U.REMOVE_TASK,taskId:t,todoListID:e}}(t,e))}))}},q=function(t,e){return function(n){y(t,e).then((function(t){var e;0===t.data.resultCode?n((e=t.data.data.item,{type:U.ADD_TASK,task:e})):t.data.messages[0]?n(N(t.data.messages[0])):n(N("Unknown error :-("))}))}},$=function(t,e,n){return function(a,r){var c=r().tasks[e].find((function(e){return e.id===t}));if(!c)throw new Error("Task no found in the STATE");var i=Object(A.a)({title:c.title,description:c.description,status:c.status,priority:l.Low,startDate:c.startDate,deadline:c.deadline},n);w(t,e,i).then((function(){return a(function(t,e,n){return{type:U.UPDATE_TASK,taskId:t,todoListID:e,model:n}}(t,e,n))}))}},Q=n(17),X=O()({listItem:{display:"flex",justifyContent:"space-between",alignItems:"center",maxWidth:"250px"}}),Z=r.a.memo((function(t){var e=Object(Q.b)(),n=X(),c=t.task,i=t.todoListId,l=Object(a.useCallback)((function(){e(Y(c.id,i))}),[e,i,c.id]),u=Object(a.useCallback)((function(t){var n=t.currentTarget.checked?o.Completed:o.New;e($(c.id,i,{status:n}))}),[e,i,c.id]),s=Object(a.useCallback)((function(t){e($(c.id,i,{title:t}))}),[e,i,c.id]);return r.a.createElement("li",{className:"".concat(c.status===o.Completed?"is-done":""," ").concat(n.listItem)},r.a.createElement(m.a,null,r.a.createElement(E.a,{onChange:u,checked:c.status===o.Completed,color:"primary"}),r.a.createElement(T,{taskTitle:c.title,changeTitle:s})),r.a.createElement(b.a,{onClick:l},r.a.createElement(S.a,null)))})),tt=n(211),et=r.a.memo((function(t){var e=t.addItem,n=t.placeholder,c=Object(a.useState)(""),i=Object(u.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(null),O=Object(u.a)(d,2),f=O[0],T=O[1],m=Object(a.useCallback)((function(){var t=o.trim();t?e(t):T("Title is required!"),l("")}),[o,e]),E=Object(a.useCallback)((function(t){f&&T(""),l(t.currentTarget.value)}),[f]),S=Object(a.useCallback)((function(t){"Enter"===t.key&&m()}),[m]);return r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement(s.a,{variant:"outlined",value:o,onChange:E,onKeyPress:S,error:!!f,helperText:f,label:n||"Enter task name..."}),r.a.createElement(b.a,{onClick:m,color:"primary"},r.a.createElement(tt.a,null)))})),nt=n(212),at=n(86),rt=n.n(at),ct=n(115);function it(){return r.a.createElement("section",{style:{width:"100px",color:"#dc004e",margin:"20px auto 0"}},r.a.createElement(ct.a,null))}var ot=r.a.memo((function(t){var e=Object(Q.c)((function(e){return e.todoLists.filter((function(e){return t.todoListId===e.id}))[0]})),n=Object(Q.c)((function(e){return e.tasks[t.todoListId]})),c=Object(Q.c)((function(t){return t.app.tasksLoadStatus})),i=Object(Q.b)();Object(a.useEffect)((function(){i(J(e.id))}),[i,e.id]);var l,u=Object(a.useMemo)((function(){return"active"===e.filter?n.filter((function(t){return t.status===o.New})):"completed"===e.filter?n.filter((function(t){return t.status===o.Completed})):n}),[e.filter,n]),s=Object(a.useCallback)((function(t){i(q(e.id,t))}),[i,e.id]),d=Object(a.useCallback)((function(){i(H("all",e.id))}),[i,e.id]),O=Object(a.useCallback)((function(){i(H("active",e.id))}),[i,e.id]),f=Object(a.useCallback)((function(){i(H("completed",e.id))}),[i,e.id]),m=Object(a.useCallback)((function(){i(W(e.id))}),[i,e.id]),E=Object(a.useCallback)((function(t){i(B(e.id,t))}),[i,e.id]);return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(T,{taskTitle:e.title,changeTitle:E}),r.a.createElement(b.a,{onClick:m},r.a.createElement(S.a,null))),r.a.createElement(et,{addItem:s}),r.a.createElement("div",{className:rt.a.btnGroup},r.a.createElement(nt.a,{variant:"all"===e.filter?"outlined":"contained",color:"primary",onClick:d,size:"small"},"All"),r.a.createElement(nt.a,{variant:"active"===e.filter?"outlined":"contained",color:"primary",onClick:O,size:"small"},"Active"),r.a.createElement(nt.a,{variant:"completed"===e.filter?"outlined":"contained",color:"primary",onClick:f,size:"small"},"Completed")),"loading"===c?r.a.createElement(it,null):r.a.createElement("ul",null,u.length?u.map((function(e){return r.a.createElement(Z,{key:e.id,todoListId:t.todoListId,task:e})})):(l="all"===(l=e.filter)?"any":l,r.a.createElement("span",{className:rt.a.noTasksMessage},"You have no ",l," tasks"))))})),lt=n(213),ut=n(214),st=n(216),dt=n(217),Ot=n(218),ft=n(219),Tt=n(184),mt=n(215),Et=n(224),bt=n(221);function St(t){return r.a.createElement(bt.a,Object.assign({elevation:6,variant:"filled"},t))}function pt(){var t=Object(Q.c)((function(t){return t.app.error})),e=Object(Q.b)(),n=function(t,n){"clickaway"!==n&&e(N(null))};return r.a.createElement(Et.a,{open:!!t,autoHideDuration:6e3,onClose:n},r.a.createElement(St,{onClose:n,severity:"error"},t))}var jt=function(){var t=Object(Q.c)((function(t){return t.todoLists})),e=Object(Q.c)((function(t){return t.app.status})),n=Object(Q.b)();Object(a.useEffect)((function(){n(V())}),[n]);var c=Object(a.useCallback)((function(t){n(F(t))}),[n]);return r.a.createElement("div",{className:"App"},r.a.createElement(lt.a,{position:"static"},r.a.createElement(ut.a,null,r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(mt.a,null)),r.a.createElement(st.a,{variant:"h6"},"News"),r.a.createElement(nt.a,{color:"inherit"},"Login")),"loading"===e&&r.a.createElement(dt.a,{color:"secondary"}),r.a.createElement(pt,null)),r.a.createElement(Ot.a,null,r.a.createElement(ft.a,{container:!0,style:{padding:"10px"},justify:"center",alignItems:"center"},r.a.createElement(et,{addItem:c,placeholder:"Enter Todo List name..."})),r.a.createElement(ft.a,{container:!0,spacing:3},t.map((function(t){return r.a.createElement(ft.a,{item:!0,key:t.id},r.a.createElement(Tt.a,{elevation:5,style:{padding:"20px 10px"}},r.a.createElement(ot,{key:t.id,todoListId:t.id})))})))))},At=n(36),Lt=n(113),_t=n(114),vt=Object(At.combineReducers)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0,n=R.CHANGE_TODOLIST_FILTER,a=R.CHANGE_TODOLIST_TITLE,r=R.ADD_TODOLIST,c=R.REMOVE_TODOLIST,i=R.SET_TODO_LISTS;switch(e.type){case c:return t.filter((function(t){return t.id!==e.id}));case r:return[Object(A.a)(Object(A.a)({},e.todoList),{},{filter:"all"})].concat(Object(p.a)(t));case a:return t.map((function(t){return t.id===e.id?Object(A.a)(Object(A.a)({},t),{},{title:e.title}):t}));case n:return t.map((function(t){return t.id===e.id?Object(A.a)(Object(A.a)({},t),{},{filter:e.filter}):t}));case i:return e.todoLists.map((function(t){return Object(A.a)(Object(A.a)({},t),{},{filter:"all"})}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0,n=U.REMOVE_TASK,a=U.ADD_TASK,r=U.UPDATE_TASK,c=U.SET_TASKS;switch(e.type){case n:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,t[e.todoListID].filter((function(t){return t.id!==e.taskId}))));case a:var i=e.task;return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},i.todoListId,[i].concat(Object(p.a)(t[i.todoListId]))));case r:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,t[e.todoListID].map((function(t){return t.id===e.taskId?Object(A.a)(Object(A.a)({},t),e.model):t}))));case R.ADD_TODOLIST:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoList.id,[]));case R.REMOVE_TODOLIST:var o=Object(A.a)({},t);return delete o[e.id],o;case R.SET_TODO_LISTS:var l=Object(A.a)({},t);return e.todoLists.forEach((function(t){l[t.id]=[]})),l;case c:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,e.tasks));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0,n=v.APP_SET_STATUS,a=v.APP_SET_ERROR,r=v.APP_SET_TASK_LOAD_STATUS;switch(e.type){case n:return Object(A.a)(Object(A.a)({},t),{},{status:e.status});case a:return Object(A.a)(Object(A.a)({},t),{},{error:e.error});case r:return Object(A.a)(Object(A.a)({},t),{},{tasksLoadStatus:e.status});default:return t}}}),kt=Object(At.createStore)(vt,Object(Lt.composeWithDevTools)(Object(At.applyMiddleware)(_t.a)));i.a.render(r.a.createElement(Q.a,{store:kt},r.a.createElement(jt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},86:function(t,e,n){t.exports={btnGroup:"Common_btnGroup__3hj-K",noTasksMessage:"Common_noTasksMessage__2S6NA"}}},[[127,1,2]]]);
//# sourceMappingURL=main.d7fa6d0d.chunk.js.map