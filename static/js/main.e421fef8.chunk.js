(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{128:function(t,e,a){t.exports=a(181)},133:function(t,e,a){},134:function(t,e,a){},181:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),i=a(11),o=a.n(i);a(133),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,s,l=a(30),u=(a(134),a(44)),d=a(221),T=a(67),O=a.n(T),f=c.a.memo((function(t){var e=O()({input:{width:"70%"},editableSpan:{display:"inline-flex",justifyContent:"center",alignItems:"center",maxWidth:"70%",overflowWrap:"anywhere",opacity:"".concat(t.disabled?"0.5":"1")}}),a=t.changeTitle,i=t.taskTitle,o=e(),r=Object(n.useState)(!1),s=Object(u.a)(r,2),l=s[0],T=s[1],f=Object(n.useState)(i),S=Object(u.a)(f,2),b=S[0],m=S[1],E=Object(n.useCallback)((function(){T(!1),b.trim()&&a(b.trim())}),[b,a]),p=Object(n.useCallback)((function(t){return m(t.currentTarget.value)}),[]);return l?c.a.createElement(d.a,{className:o.input,value:b,onBlur:E,onChange:p,autoFocus:!0}):c.a.createElement("span",{onDoubleClick:function(){t.disabled||T(!0)},className:o.editableSpan},i)})),S=a(226),b=a(223),m=a(210),E=a(211),p=a(75),j=a(25),A=a(7),_=a(113),I=a.n(_);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(r||(r={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Later=3]="Later"}(s||(s={}));var L,k=I.a.create(Object(A.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"98ca0a48-2755-4c64-8a17-87fb70df4a7a"}})),v=function(){return k.get("todo-lists")},D=function(t){return k.post("todo-lists",{title:t})},g=function(t){return k.delete("todo-lists/".concat(t))},h=function(t,e){return k.put("todo-lists/".concat(t),{title:e})},y=function(t){return k.get("todo-lists/".concat(t,"/tasks"))},C=function(t,e){return k.post("todo-lists/".concat(t,"/tasks"),{title:e})},w=function(t,e){return k.delete("todo-lists/".concat(e,"/tasks/").concat(t))},N=function(t,e,a){return k.put("todo-lists/".concat(e,"/tasks/").concat(t),a)};!function(t){t.APP_SET_STATUS="APP/SET-STATUS",t.APP_SET_ERROR="APP/SET-ERROR",t.APP_SET_SUCCESS="APP/SET-SUCCESS"}(L||(L={}));var P,R={status:"idle",appActionStatus:{error:null,success:null}},K=function(t){return{type:L.APP_SET_ERROR,error:t}},U=function(t){return{type:L.APP_SET_STATUS,status:t}},G=function(t){return{type:L.APP_SET_SUCCESS,success:t}},x=function(t,e){t.messages[0]?e(K(t.messages[0])):e(K("Unknown error :-(")),e(U("failed"))},H=function(t,e){e(K(t.message?t.message:"Unknown error!")),e(U("failed"))};!function(t){t.SET_TODO_LISTS="SET-TODO-LISTS",t.REMOVE_TODOLIST="REMOVE-TODOLIST",t.ADD_TODOLIST="ADD-TODOLIST",t.CHANGE_TODOLIST_TITLE="CHANGE-TODOLIST-TITLE",t.CHANGE_TODOLIST_FILTER="CHANGE-TODOLIST-FILTER",t.CHANGE_TODO_LIST_ENTITY_STATUS="CHANGE-TODO-LIST-ENTITY-STATUS"}(P||(P={}));var M,V=[],z=function(t,e){return{type:P.CHANGE_TODOLIST_FILTER,id:e,filter:t}},W=function(t,e){return{type:P.CHANGE_TODO_LIST_ENTITY_STATUS,entityStatus:e,todoListId:t}},Y=function(){return function(t){t(U("loading")),v().then((function(e){var a;t((a=e.data,{type:P.SET_TODO_LISTS,todoLists:a})),t(U("succeeded"))})).catch((function(e){H(e,t)}))}},F=function(t){return function(e){e(U("loading")),e(W(t,"loading")),g(t).then((function(){var a;e((a=t,{type:P.REMOVE_TODOLIST,id:a})),e(U("succeeded")),e(G("Todolist was deleted!"))})).catch((function(t){H(t,e)}))}},B=function(t){return function(e){e(U("loading")),D(t).then((function(t){var a;e((a=t.data.data.item,{type:P.ADD_TODOLIST,todoList:a})),e(U("succeeded")),e(G("Todolist was added!"))})).catch((function(t){H(t,e)}))}},J=function(t,e){return function(a){h(t,e).then((function(){a(function(t,e){return{type:P.CHANGE_TODOLIST_TITLE,title:e,id:t}}(t,e)),a(G("Todolist was updated!"))})).catch((function(t){H(t,a)}))}};!function(t){t.REMOVE_TASK="REMOVE-TASK",t.ADD_TASK="ADD-TASK",t.UPDATE_TASK="CHANGE-TASK-STATUS",t.SET_TASKS="SET-TASKS",t.SET_TASK_LOADING_STATUS="SET-TASK-LOADING-STATUS"}(M||(M={}));var q={},$=function(t,e,a){return{type:M.SET_TASK_LOADING_STATUS,taskId:t,todoListID:e,taskLoadingStatus:a}},Q=function(t){return function(e){e(U("loading")),e(W(t,"loading")),y(t).then((function(a){var n,c;e((n=t,c=a.data.items,{type:M.SET_TASKS,todoListID:n,tasks:c})),e(U("succeeded")),e(W(t,"succeeded"))})).catch((function(t){return H(t,e)}))}},X=function(t,e){return function(a){a(U("loading")),a($(t,e,"loading")),w(t,e).then((function(){a(function(t,e){return{type:M.REMOVE_TASK,taskId:t,todoListID:e}}(t,e)),a(U("succeeded")),a(G("Task was deleted!"))})).catch((function(t){return H(t,a)}))}},Z=function(t,e){return function(a){a(U("loading")),a(W(t,"loading")),C(t,e).then((function(e){var n;0===e.data.resultCode?(a((n=e.data.data.item,{type:M.ADD_TASK,task:n})),a(U("succeeded")),a(W(t,"succeeded")),a(G("Task was added!"))):(x(e.data,a),a(W(t,"failed")))})).catch((function(e){H(e,a),a(W(t,"failed"))}))}},tt=function(t,e,a){return function(n,c){var i=c().tasks[e].find((function(e){return e.id===t}));if(n($(t,e,"loading")),!i)throw new Error("Task no found in the STATE");var o=Object(A.a)({title:i.title,description:i.description,status:i.status,priority:s.Low,startDate:i.startDate,deadline:i.deadline},a);N(t,e,o).then((function(c){0===c.data.resultCode?(n(function(t,e,a){return{type:M.UPDATE_TASK,taskId:t,todoListID:e,model:a}}(t,e,a)),n(G("Task was updated!"))):x(c.data,n),n($(t,e,"succeeded"))})).catch((function(t){return H(t,n)}))}},et=a(18),at=a(88);function nt(t){var e=t.size,a=void 0===e?"100":e,n=t.type,i=void 0===n?"triangle":n,o=(Object(l.a)(t,["size","type"]),{width:"".concat(a,"px"),color:"#dc004e",margin:"20px auto 0"}),r={width:"".concat(a,"px"),color:"#dc004e",position:"absolute",left:"11px",top:"11px"};return c.a.createElement("div",{style:"circle"===i?r:o},"circle"===i?c.a.createElement(at.b,null):c.a.createElement(at.a,null))}var ct=O()({listItem:{display:"flex",justifyContent:"space-between",alignItems:"center",maxWidth:"250px"}}),it=c.a.memo((function(t){var e=t.task,a=t.todoListId,i=Object(et.b)(),o=ct(),s=Object(n.useCallback)((function(){i(X(e.id,a))}),[i,a,e.id]),l=Object(n.useCallback)((function(t){var n=t.currentTarget.checked?r.Completed:r.New;i(tt(e.id,a,{status:n}))}),[i,a,e.id]),u=Object(n.useCallback)((function(t){i(tt(e.id,a,{title:t}))}),[i,a,e.id]);return c.a.createElement("li",{className:"".concat(e.status===r.Completed?"is-done":""," ").concat(o.listItem)},c.a.createElement(S.a,{style:{position:"relative"}},c.a.createElement("span",{className:"".concat("loading"!==e.entityTaskStatus?"visibility":"")},c.a.createElement(nt,{size:"20",type:"circle"})),c.a.createElement(b.a,{className:"".concat("loading"===e.entityTaskStatus?"visibility":""),onChange:l,checked:e.status===r.Completed,color:"primary"}),c.a.createElement(f,{taskTitle:e.title,changeTitle:u,disabled:"loading"===e.entityTaskStatus})),c.a.createElement(m.a,{onClick:s,disabled:"loading"===e.entityTaskStatus},c.a.createElement(E.a,null)))})),ot=a(212),rt=c.a.memo((function(t){var e=t.disabled,a=void 0!==e&&e,i=Object(l.a)(t,["disabled"]),o=i.addItem,r=i.placeholder,s=Object(n.useState)(""),T=Object(u.a)(s,2),O=T[0],f=T[1],S=Object(n.useState)(null),b=Object(u.a)(S,2),E=b[0],p=b[1],j=Object(n.useCallback)((function(){var t=O.trim();t?o(t):p("Title is required!"),f("")}),[O,o]),A=Object(n.useCallback)((function(t){E&&p(""),f(t.currentTarget.value)}),[E]),_=Object(n.useCallback)((function(t){"Enter"===t.key&&j()}),[j]);return c.a.createElement("div",{style:{marginBottom:"20px"}},c.a.createElement(d.a,{disabled:a,variant:"outlined",value:O,onChange:A,onKeyPress:_,error:!!E,helperText:E,label:r||"Enter task name..."}),c.a.createElement(m.a,{onClick:j,color:"primary",disabled:a},c.a.createElement(ot.a,null)))})),st=a(213),lt=a(87),ut=a.n(lt),dt=c.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,i=Object(l.a)(t,["demo"]),o=Object(et.c)((function(t){return t.todoLists.filter((function(t){return i.todoListId===t.id}))[0]})),s=Object(et.c)((function(t){return t.tasks[i.todoListId]})),u=Object(et.b)();Object(n.useEffect)((function(){a||u(Q(o.id))}),[u,o.id]);var d,T=Object(n.useMemo)((function(){return"active"===o.filter?s.filter((function(t){return t.status===r.New})):"completed"===o.filter?s.filter((function(t){return t.status===r.Completed})):s}),[o.filter,s]),O=Object(n.useCallback)((function(t){u(Z(o.id,t))}),[u,o.id]),S=Object(n.useCallback)((function(){u(z("all",o.id))}),[u,o.id]),b=Object(n.useCallback)((function(){u(z("active",o.id))}),[u,o.id]),p=Object(n.useCallback)((function(){u(z("completed",o.id))}),[u,o.id]),j=Object(n.useCallback)((function(){u(F(o.id))}),[u,o.id]),A=Object(n.useCallback)((function(t){u(J(o.id,t))}),[u,o.id]);return c.a.createElement("div",null,c.a.createElement("h3",null,c.a.createElement(f,{taskTitle:o.title,changeTitle:A,disabled:"loading"===o.entityStatus}),c.a.createElement(m.a,{onClick:j,disabled:"loading"===o.entityStatus},c.a.createElement(E.a,null))),c.a.createElement(rt,{addItem:O,disabled:"loading"===o.entityStatus}),c.a.createElement("div",{className:ut.a.btnGroup},c.a.createElement(st.a,{variant:"all"===o.filter?"outlined":"contained",color:"primary",onClick:S,size:"small"},"All"),c.a.createElement(st.a,{variant:"active"===o.filter?"outlined":"contained",color:"primary",onClick:b,size:"small"},"Active"),c.a.createElement(st.a,{variant:"completed"===o.filter?"outlined":"contained",color:"primary",onClick:p,size:"small"},"Completed")),"loading"===o.entityStatus?c.a.createElement(nt,null):c.a.createElement("ul",null,T.length?T.map((function(t){return c.a.createElement(it,{key:t.id,todoListId:i.todoListId,task:t})})):(d="all"===(d=o.filter)?"any":d,c.a.createElement("span",{className:ut.a.noTasksMessage},"You have no ",d," tasks"))))})),Tt=a(214),Ot=a(215),ft=a(217),St=a(218),bt=a(219),mt=a(220),Et=a(185),pt=a(216),jt=a(225),At=a(222);function _t(t){return c.a.createElement(At.a,Object.assign({elevation:6,variant:"filled"},t))}function It(){var t=Object(et.c)((function(t){return t.app.appActionStatus})),e=t.error||t.success,a=t.error?"error":"success",n=Object(et.b)(),i=function(t,e){"clickaway"!==e&&(n(K(null)),n(G(null)))};return c.a.createElement(jt.a,{open:!!t.error||!!t.success,autoHideDuration:6e3,onClose:i},c.a.createElement(_t,{onClose:i,severity:a},e))}var Lt=function(t){var e=t.demo,a=void 0!==e&&e,i=(Object(l.a)(t,["demo"]),Object(et.c)((function(t){return t.todoLists}))),o=Object(et.c)((function(t){return t.app.status})),r=Object(et.b)();Object(n.useEffect)((function(){a||r(Y())}),[r]);var s=Object(n.useCallback)((function(t){r(B(t))}),[r]);return c.a.createElement("div",{className:"App"},c.a.createElement(Tt.a,{position:"static"},c.a.createElement(Ot.a,null,c.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(pt.a,null)),c.a.createElement(ft.a,{variant:"h6"},"News"),c.a.createElement(st.a,{color:"inherit"},"Login")),"loading"===o&&c.a.createElement(St.a,{color:"secondary"}),c.a.createElement(It,null)),c.a.createElement(bt.a,null,c.a.createElement(mt.a,{container:!0,style:{padding:"10px"},justify:"center",alignItems:"center"},c.a.createElement(rt,{addItem:s,placeholder:"Enter Todo List name..."})),c.a.createElement(mt.a,{container:!0,spacing:3},i.map((function(t){return c.a.createElement(mt.a,{item:!0,key:t.id},c.a.createElement(Et.a,{elevation:5,style:{padding:"20px 10px"}},c.a.createElement(dt,{demo:a,key:t.id,todoListId:t.id})))})))))},kt=a(37),vt=a(115),Dt=a(116),gt=Object(kt.combineReducers)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,e=arguments.length>1?arguments[1]:void 0,a=P.CHANGE_TODOLIST_FILTER,n=P.CHANGE_TODOLIST_TITLE,c=P.ADD_TODOLIST,i=P.REMOVE_TODOLIST,o=P.SET_TODO_LISTS,r=P.CHANGE_TODO_LIST_ENTITY_STATUS;switch(e.type){case i:return t.filter((function(t){return t.id!==e.id}));case c:return[Object(A.a)(Object(A.a)({},e.todoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(p.a)(t));case n:return t.map((function(t){return t.id===e.id?Object(A.a)(Object(A.a)({},t),{},{title:e.title}):t}));case a:return t.map((function(t){return t.id===e.id?Object(A.a)(Object(A.a)({},t),{},{filter:e.filter}):t}));case r:return t.map((function(t){return t.id===e.todoListId?Object(A.a)(Object(A.a)({},t),{},{entityStatus:e.entityStatus}):t}));case o:return e.todoLists.map((function(t){return Object(A.a)(Object(A.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0,a=M.REMOVE_TASK,n=M.ADD_TASK,c=M.UPDATE_TASK,i=M.SET_TASKS,o=M.SET_TASK_LOADING_STATUS;switch(e.type){case a:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,t[e.todoListID].filter((function(t){return t.id!==e.taskId}))));case n:var r=e.task;return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},r.todoListId,[Object(A.a)(Object(A.a)({},r),{},{entityTaskStatus:"idle"})].concat(Object(p.a)(t[r.todoListId]))));case c:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,t[e.todoListID].map((function(t){return t.id===e.taskId?Object(A.a)(Object(A.a)({},t),e.model):t}))));case P.ADD_TODOLIST:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoList.id,[]));case P.REMOVE_TODOLIST:var s=Object(A.a)({},t);return delete s[e.id],s;case P.SET_TODO_LISTS:var l=Object(A.a)({},t);return e.todoLists.forEach((function(t){l[t.id]=[]})),l;case i:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,e.tasks.map((function(t){return Object(A.a)(Object(A.a)({},t),{},{entityTaskStatus:"idle"})}))));case o:return Object(A.a)(Object(A.a)({},t),{},Object(j.a)({},e.todoListID,t[e.todoListID].map((function(t){return t.id===e.taskId?Object(A.a)(Object(A.a)({},t),{},{entityTaskStatus:e.taskLoadingStatus}):t}))));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0,a=L.APP_SET_STATUS,n=L.APP_SET_ERROR,c=L.APP_SET_SUCCESS;switch(e.type){case a:return Object(A.a)(Object(A.a)({},t),{},{status:e.status});case n:return Object(A.a)(Object(A.a)({},t),{},{appActionStatus:Object(A.a)(Object(A.a)({},t.appActionStatus),{},{error:e.error,success:null})});case c:return Object(A.a)(Object(A.a)({},t),{},{appActionStatus:Object(A.a)(Object(A.a)({},t.appActionStatus),{},{error:null,success:e.success})});default:return t}}}),ht=Object(kt.createStore)(gt,Object(vt.composeWithDevTools)(Object(kt.applyMiddleware)(Dt.a)));o.a.render(c.a.createElement(et.a,{store:ht},c.a.createElement(Lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},87:function(t,e,a){t.exports={btnGroup:"Common_btnGroup__3hj-K",noTasksMessage:"Common_noTasksMessage__2S6NA"}}},[[128,1,2]]]);
//# sourceMappingURL=main.e421fef8.chunk.js.map