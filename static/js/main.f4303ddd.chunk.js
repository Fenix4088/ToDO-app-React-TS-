(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{100:function(e,t,a){e.exports={btnGroup:"Common_btnGroup__3hj-K",noTasksMessage:"Common_noTasksMessage__2S6NA"}},148:function(e,t,a){e.exports=a(200)},153:function(e,t,a){},154:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(12),r=a.n(i);a(153),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,l,s=a(11),u=(a(154),a(238)),d=a(239),m=a(229),f=a(205),T=a(234),E=a(241),O=a(242),b=a(240),S=a(7),p=a(87),j=a(125),I=a.n(j);!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(o||(o={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.High=2]="High",e[e.Later=3]="Later"}(l||(l={}));var g,_=I.a.create(Object(S.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"98ca0a48-2755-4c64-8a17-87fb70df4a7a"}})),L=function(){return _.get("todo-lists")},v=function(e){return _.post("todo-lists",{title:e})},A=function(e){return _.delete("todo-lists/".concat(e))},h=function(e,t){return _.put("todo-lists/".concat(e),{title:t})},k=function(e){return _.get("todo-lists/".concat(e,"/tasks"))},D=function(e,t){return _.post("todo-lists/".concat(e,"/tasks"),{title:t})},y=function(e,t){return _.delete("todo-lists/".concat(t,"/tasks/").concat(e))},C=function(e,t,a){return _.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},w=function(e){return _.post("auth/login",e)},P=function(){return _.delete("auth/login")},N=function(){return _.get("auth/me")},G=function(e,t){e.messages[0]?t(z(e.messages[0])):t(z("Unknown error :-(")),t(V("failed"))},R=function(e,t){t(z(e.message?e.message:"Unknown error!")),t(V("failed"))};!function(e){e.SET_IS_LOGGED_IN="SET-IS-LOGGED-IN"}(g||(g={}));var K,U={isLoggedIn:!1},x=function(e){return{type:g.SET_IS_LOGGED_IN,value:e}};!function(e){e.APP_SET_STATUS="APP/SET-STATUS",e.APP_SET_ERROR="APP/SET-ERROR",e.APP_SET_SUCCESS="APP/SET-SUCCESS",e.SET_APP_INITIALIZED="APP/SET-APP-INITIALIZED"}(K||(K={}));var M,H={status:"idle",isInitialized:!1,appActionStatus:{error:null,success:null}},z=function(e){return{type:K.APP_SET_ERROR,error:e}},V=function(e){return{type:K.APP_SET_STATUS,status:e}},F=function(e){return{type:K.APP_SET_SUCCESS,success:e}},W=function(){return function(e){N().then((function(t){var a;0===t.data.resultCode&&e(x(!0)),e((a=!0,{type:K.SET_APP_INITIALIZED,value:a}))}))}};!function(e){e.SET_TODO_LISTS="SET-TODO-LISTS",e.REMOVE_TODOLIST="REMOVE-TODOLIST",e.ADD_TODOLIST="ADD-TODOLIST",e.CHANGE_TODOLIST_TITLE="CHANGE-TODOLIST-TITLE",e.CHANGE_TODOLIST_FILTER="CHANGE-TODOLIST-FILTER",e.CHANGE_TODO_LIST_ENTITY_STATUS="CHANGE-TODO-LIST-ENTITY-STATUS"}(M||(M={}));var Y=[],B=function(e,t){return{type:M.CHANGE_TODOLIST_FILTER,id:t,filter:e}},Z=function(e,t){return{type:M.CHANGE_TODO_LIST_ENTITY_STATUS,entityStatus:t,todoListId:e}},q=function(){return function(e){e(V("loading")),L().then((function(t){var a;e((a=t.data,{type:M.SET_TODO_LISTS,todoLists:a})),e(V("succeeded"))})).catch((function(t){R(t,e)}))}},J=function(e){return function(t){t(V("loading")),t(Z(e,"loading")),A(e).then((function(){var a;t((a=e,{type:M.REMOVE_TODOLIST,id:a})),t(V("succeeded")),t(F("Todolist was deleted!"))})).catch((function(e){R(e,t)}))}},$=function(e){return function(t){t(V("loading")),v(e).then((function(e){var a;t((a=e.data.data.item,{type:M.ADD_TODOLIST,todoList:a})),t(V("succeeded")),t(F("Todolist was added!"))})).catch((function(e){R(e,t)}))}},Q=function(e,t){return function(a){h(e,t).then((function(){a(function(e,t){return{type:M.CHANGE_TODOLIST_TITLE,title:t,id:e}}(e,t)),a(F("Todolist was updated!"))})).catch((function(e){R(e,a)}))}},X=a(15),ee=a(247),te=a(244);function ae(e){return c.a.createElement(te.a,Object.assign({elevation:6,variant:"filled"},e))}function ne(){var e=Object(X.c)((function(e){return e.app.appActionStatus})),t=e.error||e.success,a=e.error?"error":"success",n=Object(X.b)(),i=function(e,t){"clickaway"!==t&&(n(z(null)),n(F(null)))};return c.a.createElement(ee.a,{open:!!e.error||!!e.success,autoHideDuration:6e3,onClose:i},c.a.createElement(ae,{onClose:i,severity:a},t))}var ce,ie=a(235),re=a(204),oe=a(52),le=a(54),se=a(243),ue=a(82),de=a.n(ue),me=c.a.memo((function(e){var t=de()({input:{width:"70%"},editableSpan:{display:"inline-flex",justifyContent:"center",alignItems:"center",maxWidth:"70%",overflowWrap:"anywhere",opacity:"".concat(e.disabled?"0.5":"1")}}),a=e.changeTitle,i=e.taskTitle,r=t(),o=Object(n.useState)(!1),l=Object(le.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(i),m=Object(le.a)(d,2),f=m[0],T=m[1],E=Object(n.useCallback)((function(){u(!1),f.trim()&&a(f.trim())}),[f,a]),O=Object(n.useCallback)((function(e){return T(e.currentTarget.value)}),[]);return s?c.a.createElement(se.a,{className:r.input,value:f,onBlur:E,onChange:O,autoFocus:!0}):c.a.createElement("span",{onDoubleClick:function(){e.disabled||u(!0)},className:r.editableSpan},i)})),fe=a(249),Te=a(245),Ee=a(232),Oe=a(33);!function(e){e.REMOVE_TASK="REMOVE-TASK",e.ADD_TASK="ADD-TASK",e.UPDATE_TASK="CHANGE-TASK-STATUS",e.SET_TASKS="SET-TASKS",e.SET_TASK_LOADING_STATUS="SET-TASK-LOADING-STATUS"}(ce||(ce={}));var be={},Se=function(e,t,a){return{type:ce.SET_TASK_LOADING_STATUS,taskId:e,todoListID:t,taskLoadingStatus:a}},pe=function(e){return function(t){t(V("loading")),t(Z(e,"loading")),k(e).then((function(a){var n,c;t((n=e,c=a.data.items,{type:ce.SET_TASKS,todoListID:n,tasks:c})),t(V("succeeded")),t(Z(e,"succeeded"))})).catch((function(e){return R(e,t)}))}},je=function(e,t){return function(a){a(V("loading")),a(Se(e,t,"loading")),y(e,t).then((function(){a(function(e,t){return{type:ce.REMOVE_TASK,taskId:e,todoListID:t}}(e,t)),a(V("succeeded")),a(F("Task was deleted!"))})).catch((function(e){return R(e,a)}))}},Ie=function(e,t){return function(a){a(V("loading")),a(Z(e,"loading")),D(e,t).then((function(t){var n;0===t.data.resultCode?(a((n=t.data.data.item,{type:ce.ADD_TASK,task:n})),a(V("succeeded")),a(Z(e,"succeeded")),a(F("Task was added!"))):(G(t.data,a),a(Z(e,"failed")))})).catch((function(t){R(t,a),a(Z(e,"failed"))}))}},ge=function(e,t,a){return function(n,c){var i=c().tasks[t].find((function(t){return t.id===e}));if(n(Se(e,t,"loading")),!i)throw new Error("Task no found in the STATE");var r=Object(S.a)({title:i.title,description:i.description,status:i.status,priority:l.Low,startDate:i.startDate,deadline:i.deadline},a);C(e,t,r).then((function(c){0===c.data.resultCode?(n(function(e,t,a){return{type:ce.UPDATE_TASK,taskId:e,todoListID:t,model:a}}(e,t,a)),n(F("Task was updated!"))):G(c.data,n),n(Se(e,t,"succeeded"))})).catch((function(e){return R(e,n)}))}},_e=a(99);function Le(e){var t=e.size,a=void 0===t?"100":t,n=e.type,i=void 0===n?"triangle":n,r=(Object(oe.a)(e,["size","type"]),{width:"".concat(a,"px"),color:"#dc004e",margin:"20px auto 0"}),o={width:"".concat(a,"px"),color:"#dc004e",position:"absolute",left:"11px",top:"11px"};return c.a.createElement("div",{style:"circle"===i?o:r},"circle"===i?c.a.createElement(_e.b,null):c.a.createElement(_e.a,null))}var ve=de()({listItem:{display:"flex",justifyContent:"space-between",alignItems:"center",maxWidth:"250px"}}),Ae=c.a.memo((function(e){var t=e.task,a=e.todoListId,i=Object(X.b)(),r=ve(),l=Object(n.useCallback)((function(){i(je(t.id,a))}),[i,a,t.id]),s=Object(n.useCallback)((function(e){var n=e.currentTarget.checked?o.Completed:o.New;i(ge(t.id,a,{status:n}))}),[i,a,t.id]),u=Object(n.useCallback)((function(e){i(ge(t.id,a,{title:e}))}),[i,a,t.id]);return c.a.createElement("li",{className:"".concat(t.status===o.Completed?"is-done":""," ").concat(r.listItem)},c.a.createElement(fe.a,{style:{position:"relative"}},c.a.createElement("span",{className:"".concat("loading"!==t.entityTaskStatus?"visibility":"")},c.a.createElement(Le,{size:"20",type:"circle"})),c.a.createElement(Te.a,{className:"".concat("loading"===t.entityTaskStatus?"visibility":""),onChange:s,checked:t.status===o.Completed,color:"primary"}),c.a.createElement(me,{taskTitle:t.title,changeTitle:u,disabled:"loading"===t.entityTaskStatus})),c.a.createElement(m.a,{onClick:l,disabled:"loading"===t.entityTaskStatus},c.a.createElement(Ee.a,null)))})),he=a(233),ke=c.a.memo((function(e){var t=e.disabled,a=void 0!==t&&t,i=Object(oe.a)(e,["disabled"]),r=i.addItem,o=i.placeholder,l=Object(n.useState)(""),s=Object(le.a)(l,2),u=s[0],d=s[1],f=Object(n.useState)(null),T=Object(le.a)(f,2),E=T[0],O=T[1],b=Object(n.useCallback)((function(){var e=u.trim();e?r(e):O("Title is required!"),d("")}),[u,r]),S=Object(n.useCallback)((function(e){E&&O(""),d(e.currentTarget.value)}),[E]),p=Object(n.useCallback)((function(e){"Enter"===e.key&&b()}),[b]);return c.a.createElement("div",{style:{marginBottom:"20px"}},c.a.createElement(se.a,{disabled:a,variant:"outlined",value:u,onChange:S,onKeyPress:p,error:!!E,helperText:E,label:o||"Enter task name..."}),c.a.createElement(m.a,{onClick:b,color:"primary",disabled:a},c.a.createElement(he.a,null)))})),De=a(100),ye=a.n(De),Ce=c.a.memo((function(e){var t=e.demo,a=void 0!==t&&t,i=(e.isLoggedIn,Object(oe.a)(e,["demo","isLoggedIn"])),r=Object(X.c)((function(e){return e.todoLists.filter((function(e){return i.todoListId===e.id}))[0]})),l=Object(X.c)((function(e){return e.tasks[i.todoListId]})),s=Object(X.b)();Object(n.useEffect)((function(){a||s(pe(r.id))}),[s,r.id]);var u,d=Object(n.useMemo)((function(){return"active"===r.filter?l.filter((function(e){return e.status===o.New})):"completed"===r.filter?l.filter((function(e){return e.status===o.Completed})):l}),[r.filter,l]),f=Object(n.useCallback)((function(e){s(Ie(r.id,e))}),[s,r.id]),E=Object(n.useCallback)((function(){s(B("all",r.id))}),[s,r.id]),O=Object(n.useCallback)((function(){s(B("active",r.id))}),[s,r.id]),b=Object(n.useCallback)((function(){s(B("completed",r.id))}),[s,r.id]),S=Object(n.useCallback)((function(){s(J(r.id))}),[s,r.id]),p=Object(n.useCallback)((function(e){s(Q(r.id,e))}),[s,r.id]);return c.a.createElement("div",null,c.a.createElement("h3",null,c.a.createElement(me,{taskTitle:r.title,changeTitle:p,disabled:"loading"===r.entityStatus}),c.a.createElement(m.a,{onClick:S,disabled:"loading"===r.entityStatus},c.a.createElement(Ee.a,null))),c.a.createElement(ke,{addItem:f,disabled:"loading"===r.entityStatus}),c.a.createElement("div",{className:ye.a.btnGroup},c.a.createElement(T.a,{variant:"all"===r.filter?"outlined":"contained",color:"primary",onClick:E,size:"small"},"All"),c.a.createElement(T.a,{variant:"active"===r.filter?"outlined":"contained",color:"primary",onClick:O,size:"small"},"Active"),c.a.createElement(T.a,{variant:"completed"===r.filter?"outlined":"contained",color:"primary",onClick:b,size:"small"},"Completed")),"loading"===r.entityStatus?c.a.createElement(Le,null):c.a.createElement("ul",null,d.length?d.map((function(e){return c.a.createElement(Ae,{key:e.id,todoListId:i.todoListId,task:e})})):(u="all"===(u=r.filter)?"any":u,c.a.createElement("span",{className:ye.a.noTasksMessage},"You have no ",u," tasks"))))})),we=function(e){var t=e.demo,a=Object(X.c)((function(e){return e.todoLists})),i=Object(X.c)((function(e){return e.login.isLoggedIn})),r=Object(X.b)(),o=Object(n.useCallback)((function(e){r($(e))}),[r]);return i?c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{container:!0,style:{padding:"10px"},justify:"center",alignItems:"center"},c.a.createElement(ke,{addItem:o,placeholder:"Enter Todo List name..."})),c.a.createElement(ie.a,{container:!0,spacing:3},a.map((function(e){return c.a.createElement(ie.a,{item:!0,key:e.id},c.a.createElement(re.a,{elevation:5,style:{padding:"20px 10px"}},c.a.createElement(Ce,{demo:t,isLoggedIn:i,key:e.id,todoListId:e.id})))})))):c.a.createElement(s.a,{to:"/login"})},Pe=a(248),Ne=a(231),Ge=a(236),Re=a(237),Ke=a(134),Ue=function(){var e=Object(X.b)(),t=Object(X.c)((function(e){return e.login.isLoggedIn})),a=Object(Ke.a)({validate:function(e){return e.email?e.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var a;e((a=t,function(e){e(V("loading")),w(a).then((function(t){0===t.data.resultCode?(e(x(!0)),e(F("Welcome!")),e(V("succeeded"))):(G(t.data,e),e(V("failed")))})).catch((function(t){return R(t,e)}))}))}});return t?c.a.createElement(s.a,{to:"/"}):c.a.createElement(ie.a,{container:!0,justify:"center"},c.a.createElement(ie.a,{item:!0,xs:4},c.a.createElement("form",{onSubmit:a.handleSubmit},c.a.createElement(Pe.a,null,c.a.createElement(Ne.a,null,c.a.createElement("p",null,"To log in get registered",c.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),c.a.createElement("p",null,"or use common test account credentials:"),c.a.createElement("p",null,"Email: free@samuraijs.com"),c.a.createElement("p",null,"Password: free")),c.a.createElement(Ge.a,null,c.a.createElement(se.a,Object.assign({label:"Email",margin:"normal",name:"email"},a.getFieldProps("email"))),a.errors.email?c.a.createElement("div",null,a.errors.email):null,c.a.createElement(se.a,Object.assign({type:"password",label:"Password",margin:"normal",name:"password"},a.getFieldProps("password"))),a.errors.password?c.a.createElement("div",null,a.errors.password):null,c.a.createElement(Re.a,{label:"Remember me",control:c.a.createElement(Te.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),c.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var xe=function(e){var t=e.demo,a=void 0!==t&&t,i=Object(X.c)((function(e){return e.app.status})),r=Object(X.c)((function(e){return e.app.isInitialized})),o=Object(X.c)((function(e){return e.login.isLoggedIn})),l=Object(X.b)();Object(n.useEffect)((function(){l(W())}),[]),Object(n.useEffect)((function(){a||l(q())}),[l]);var S=Object(n.useCallback)((function(){l((function(e){e(V("loading")),P().then((function(t){0===t.data.resultCode?(e(x(!1)),e(F("Bue!")),e(V("succeeded"))):(G(t.data,e),e(V("failed")))})).catch((function(t){return R(t,e)}))}))}),[]);return r?c.a.createElement("div",{className:"App"},c.a.createElement(u.a,{position:"static"},c.a.createElement(d.a,null,c.a.createElement(m.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(b.a,null)),c.a.createElement(f.a,{variant:"h6"},"News"),o&&c.a.createElement(T.a,{color:"inherit",onClick:S},"Log out")),"loading"===i&&c.a.createElement(E.a,{color:"secondary"}),c.a.createElement(ne,null)),c.a.createElement(O.a,null,c.a.createElement(s.b,{path:"/",exact:!0,render:function(){return c.a.createElement(we,{demo:a})}}),c.a.createElement(s.b,{path:"/login",render:function(){return c.a.createElement(Ue,null)}}))):c.a.createElement("div",{style:{position:"fixed",top:"30%",left:"42%",width:"100%"}},c.a.createElement(Le,{size:"200",type:"circle"}))},Me=a(42),He=a(132),ze=a(133),Ve=Object(Me.combineReducers)({todoLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=M.CHANGE_TODOLIST_FILTER,n=M.CHANGE_TODOLIST_TITLE,c=M.ADD_TODOLIST,i=M.REMOVE_TODOLIST,r=M.SET_TODO_LISTS,o=M.CHANGE_TODO_LIST_ENTITY_STATUS;switch(t.type){case i:return e.filter((function(e){return e.id!==t.id}));case c:return[Object(S.a)(Object(S.a)({},t.todoList),{},{filter:"all",entityStatus:"idle"})].concat(Object(p.a)(e));case n:return e.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{title:t.title}):e}));case a:return e.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{filter:t.filter}):e}));case o:return e.map((function(e){return e.id===t.todoListId?Object(S.a)(Object(S.a)({},e),{},{entityStatus:t.entityStatus}):e}));case r:return t.todoLists.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{filter:"all",entityStatus:"idle"})}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,a=ce.REMOVE_TASK,n=ce.ADD_TASK,c=ce.UPDATE_TASK,i=ce.SET_TASKS,r=ce.SET_TASK_LOADING_STATUS;switch(t.type){case a:return Object(S.a)(Object(S.a)({},e),{},Object(Oe.a)({},t.todoListID,e[t.todoListID].filter((function(e){return e.id!==t.taskId}))));case n:var o=t.task;return Object(S.a)(Object(S.a)({},e),{},Object(Oe.a)({},o.todoListId,[Object(S.a)(Object(S.a)({},o),{},{entityTaskStatus:"idle"})].concat(Object(p.a)(e[o.todoListId]))));case c:return Object(S.a)(Object(S.a)({},e),{},Object(Oe.a)({},t.todoListID,e[t.todoListID].map((function(e){return e.id===t.taskId?Object(S.a)(Object(S.a)({},e),t.model):e}))));case M.ADD_TODOLIST:return Object(S.a)(Object(S.a)({},e),{},Object(Oe.a)({},t.todoList.id,[]));case M.REMOVE_TODOLIST:var l=Object(S.a)({},e);return delete l[t.id],l;case M.SET_TODO_LISTS:var s=Object(S.a)({},e);return t.todoLists.forEach((function(e){s[e.id]=[]})),s;case i:return Object(S.a)(Object(S.a)({},e),{},Object(Oe.a)({},t.todoListID,t.tasks.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{entityTaskStatus:"idle"})}))));case r:return Object(S.a)(Object(S.a)({},e),{},Object(Oe.a)({},t.todoListID,e[t.todoListID].map((function(e){return e.id===t.taskId?Object(S.a)(Object(S.a)({},e),{},{entityTaskStatus:t.taskLoadingStatus}):e}))));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,a=K.APP_SET_STATUS,n=K.APP_SET_ERROR,c=K.APP_SET_SUCCESS,i=K.SET_APP_INITIALIZED;switch(t.type){case a:return Object(S.a)(Object(S.a)({},e),{},{status:t.status});case n:return Object(S.a)(Object(S.a)({},e),{},{appActionStatus:Object(S.a)(Object(S.a)({},e.appActionStatus),{},{error:t.error,success:null})});case c:return Object(S.a)(Object(S.a)({},e),{},{appActionStatus:Object(S.a)(Object(S.a)({},e.appActionStatus),{},{error:null,success:t.success})});case i:return Object(S.a)(Object(S.a)({},e),{},{isInitialized:t.value});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=g.SET_IS_LOGGED_IN;switch(t.type){case a:return Object(S.a)(Object(S.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),Fe=Object(Me.createStore)(Ve,Object(He.composeWithDevTools)(Object(Me.applyMiddleware)(ze.a))),We=a(135);r.a.render(c.a.createElement(X.a,{store:Fe},c.a.createElement(We.a,null,c.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.f4303ddd.chunk.js.map